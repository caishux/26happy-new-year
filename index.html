<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>2026é©¬å¹´å¤§å‰ - å–œåº†ä¸­å›½é£</title>
    <style>
        /* ä¼ä¸šçº§ç§»åŠ¨ç«¯CSSé‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº® */
            -webkit-font-smoothing: antialiased; /* å­—ä½“æŠ—é”¯é½¿ */
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* é˜²æ­¢ç§»åŠ¨ç«¯é•¿æŒ‰èœå• */
        *:not(input):not(textarea) {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* ç¦æ­¢å›¾ç‰‡å’Œé“¾æ¥é•¿æŒ‰èœå• */
        img, a {
            -webkit-touch-callout: none;
        }
        
        html {
            font-size: 16px;
            height: 100%;
            overflow: hidden; /* é˜²æ­¢é¡µé¢æ»šåŠ¨ */
        }
        
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ff4d4d 0%, #ff3333 30%, #cc0000 100%);
            height: 100vh;
            height: -webkit-fill-available; /* å…¼å®¹iOS Safari */
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, "STKaiti", "Microsoft YaHei", "SimSun", "PingFang SC", "Helvetica Neue", sans-serif;
            color: #fff;
            position: relative;
            touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */
        }
        
        /* é˜²æ­¢ç§»åŠ¨ç«¯æ»šåŠ¨ */
        body, html {
            overscroll-behavior: none;
        }
        
        /* å–œåº†èƒŒæ™¯çº¹ç† - ä¼˜åŒ–ç§»åŠ¨ç«¯æ€§èƒ½ */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffcc00' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E"),
                radial-gradient(circle at 20% 30%, rgba(255, 204, 0, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            background-size: 100px, auto, auto;
            background-attachment: fixed; /* ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ– */
            will-change: transform; /* ç¡¬ä»¶åŠ é€Ÿ */
        }
        
        /* äº‘çº¹è£…é¥° */
        .cloud-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50,50 C70,30 90,30 110,50 C130,70 150,70 170,50 C190,30 190,10 170,10 C150,10 130,30 110,10 C90,-10 70,-10 50,10 C30,30 30,70 50,50 Z' fill='none' stroke='%23ffcc00' stroke-width='1' opacity='0.05'/%3E%3C/svg%3E");
            background-size: 200px;
            z-index: -1;
            background-attachment: fixed;
            will-change: transform;
        }
        
        /* å¼€åœºè¦†ç›–å±‚ - å–œåº†çº¢è‰²æ¸å˜ */
        .opening-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff3333 0%, #cc0000 30%, #990000 100%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity 1.2s ease-in-out;
        }
        
        .opening-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .opening-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            padding: clamp(1rem, 4vw, 2rem);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 3px solid rgba(255, 204, 0, 0.3);
            backdrop-filter: blur(5px);
            margin: 0 20px;
            max-width: 90%;
            animation: openingTextPulse 1.8s infinite alternate;
        }
        
        /* è‡ªå®šä¹‰é©¬å›¾ç‰‡æ ·å¼ */
        .horse-image-container {
            width: clamp(100px, 30vw, 180px);
            height: clamp(100px, 30vw, 180px);
            margin-bottom: clamp(1rem, 4vw, 2rem);
            position: relative;
            animation: horseImageGlow 2s infinite alternate;
        }
        
        .horse-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 0 15px rgba(255, 204, 0, 0.7));
            transition: opacity 1.5s ease;
        }
        
        /* å½“å¼€åœºåŠ¨ç”»ç»“æŸæ—¶ï¼Œå›¾ç‰‡é€æ¸æ¶ˆå¤± */
        .opening-overlay.fade-out .horse-image {
            opacity: 0;
        }
        
        @keyframes horseImageGlow {
            0% { 
                filter: drop-shadow(0 0 15px rgba(255, 204, 0, 0.7));
                transform: scale(1) rotate(-1deg);
            }
            100% { 
                filter: drop-shadow(0 0 25px rgba(255, 255, 0, 0.9));
                transform: scale(1.05) rotate(1deg);
            }
        }
        
        .opening-text {
            font-size: clamp(1.8rem, 8vw, 4.2rem); /* å“åº”å¼å­—ä½“å¤§å° */
            color: #ffcc00;
            text-shadow: 
                0 0 20px #ff9900,
                0 0 40px #ff9900,
                3px 3px 5px rgba(0, 0, 0, 0.5);
            letter-spacing: clamp(0.5rem, 4vw, 1.5rem); /* å“åº”å¼å­—é—´è· */
            font-weight: bold;
            text-align: center;
            line-height: 1.3;
        }
        
        .opening-text::before {
            content: "âœ¨";
            position: absolute;
            left: -1.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: clamp(1.5rem, 6vw, 2.5rem);
        }
        
        .opening-text::after {
            content: "âœ¨";
            position: absolute;
            right: -1.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: clamp(1.5rem, 6vw, 2.5rem);
        }
        
        @keyframes openingTextPulse {
            0% { 
                transform: scale(1) rotate(-1deg); 
                box-shadow: 
                    0 0 15px rgba(255, 153, 0, 0.2),
                    inset 0 0 15px rgba(255, 153, 0, 0.1);
            }
            100% { 
                transform: scale(1.08) rotate(1deg); 
                box-shadow: 
                    0 0 25px rgba(255, 204, 0, 0.3),
                    inset 0 0 20px rgba(255, 204, 0, 0.2);
            }
        }
        
        /* ä¸»å®¹å™¨ - ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .main-container {
            width: 100%;
            max-width: 800px;
            padding: clamp(1rem, 4vw, 2rem); /* å“åº”å¼å†…è¾¹è· */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 10;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease, transform 1s ease;
            min-height: 100vh; /* ç¡®ä¿å®¹å™¨é«˜åº¦è¶³å¤Ÿ */
            overflow-y: auto; /* å…è®¸å†…å®¹æ»šåŠ¨ */
            -webkit-overflow-scrolling: touch; /* ç§»åŠ¨ç«¯å¹³æ»‘æ»šåŠ¨ */
        }
        
        .main-container.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* é¡¶éƒ¨æ¨ªå¹… - ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .banner {
            width: calc(100% - 40px); /* ç•™å‡ºå®‰å…¨è¾¹è· */
            max-width: 600px;
            background: linear-gradient(to right, #ff3333, #ff9900, #ffcc00, #ff9900, #ff3333);
            border: 3px solid #ffcc00;
            border-radius: 10px;
            padding: clamp(0.8rem, 3vw, 1rem) clamp(1rem, 4vw, 2rem);
            margin-bottom: clamp(1rem, 4vw, 2rem);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡º */
        }
        
        .banner::before, .banner::after {
            content: "â–";
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: clamp(1.2rem, 5vw, 2rem);
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .banner::before {
            left: clamp(0.5rem, 2vw, 1rem);
        }
        
        .banner::after {
            right: clamp(0.5rem, 2vw, 1rem);
        }
        
        .banner-text {
            font-size: clamp(1.5rem, 7vw, 2.8rem);
            font-weight: bold;
            color: #fff;
            letter-spacing: clamp(0.3rem, 3vw, 0.8rem);
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);
            line-height: 1.3; /* æ”¹å–„ç§»åŠ¨ç«¯è¡Œé«˜ */
            word-break: keep-all; /* é˜²æ­¢ä¸­æ–‡å­—ç¬¦æ¢è¡Œ */
            white-space: nowrap; /* é˜²æ­¢æ–‡å­—æ¢è¡Œ */
            overflow: hidden; /* é˜²æ­¢æº¢å‡º */
        }
        
        /* é©¬å¹´æ ‡å¿—åŒºåŸŸ - ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .horse-section {
            position: relative;
            margin: clamp(1rem, 4vw, 2rem) 0;
            padding: clamp(1rem, 4vw, 2rem);
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 2px solid #ffcc00;
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            width: calc(100% - 40px); /* ç•™å‡ºå®‰å…¨è¾¹è· */
            max-width: 500px;
        }
        
        .horse-symbol {
            font-size: clamp(4rem, 20vw, 8rem); /* å“åº”å¼é©¬å›¾æ ‡ */
            color: #ffcc00;
            text-shadow: 0 0 20px rgba(255, 204, 0, 0.7);
            margin: clamp(0.5rem, 2vw, 1rem) 0;
            animation: horseGlow 2s infinite alternate;
            display: block; /* ç¡®ä¿æ­£ç¡®æ˜¾ç¤º */
        }
        
        @keyframes horseGlow {
            0% { text-shadow: 0 0 10px rgba(255, 204, 0, 0.7); }
            100% { text-shadow: 0 0 25px rgba(255, 255, 255, 0.9); }
        }
        
        .year-text {
            font-size: clamp(2rem, 10vw, 3.5rem);
            font-weight: bold;
            color: #ffcc00;
            letter-spacing: clamp(0.5rem, 4vw, 1rem);
            margin: clamp(0.5rem, 2vw, 1rem) 0;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            line-height: 1.3;
        }
        
        /* ä¸­å›½é£è£…é¥°å…ƒç´  - ç§»åŠ¨ç«¯éšè— */
        .chinese-decoration {
            position: absolute;
            pointer-events: none;
            z-index: 5;
            display: none; /* ç§»åŠ¨ç«¯éšè—ä»¥èŠ‚çœç©ºé—´ */
        }
        
        .decoration-left {
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            color: #ffcc00;
        }
        
        .decoration-right {
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            color: #ffcc00;
        }
        
        /* ä¸»æŒ‰é’® - ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼ˆç¬¦åˆFittså®šå¾‹ï¼‰ */
        .main-btn {
            padding: clamp(0.8rem, 3vw, 1.5rem) clamp(2rem, 8vw, 4rem);
            font-size: clamp(1.2rem, 5vw, 1.8rem);
            background: linear-gradient(145deg, #ffcc00, #ff9900);
            color: #cc0000;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            letter-spacing: clamp(0.2rem, 2vw, 0.5rem);
            margin: clamp(1rem, 4vw, 2rem) 0;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
            z-index: 20;
            min-height: 60px; /* ç¡®ä¿è§¦æ‘¸ç›®æ ‡è¶³å¤Ÿå¤§ */
            min-width: 200px; /* ç¡®ä¿æŒ‰é’®è¶³å¤Ÿå®½ */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸ */
        }
        
        /* é˜²æ­¢ç§»åŠ¨ç«¯æŒ‰é’®ç‚¹å‡»å»¶è¿Ÿ */
        @media (hover: hover) {
            .main-btn:hover {
                transform: translateY(-5px) scale(1.05);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            }
        }
        
        .main-btn:active {
            transform: scale(0.98); /* ç§»åŠ¨ç«¯ç‚¹å‡»åé¦ˆ */
            transition: transform 0.1s;
        }
        
        .main-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.7s;
        }
        
        /* æ“ä½œæç¤º - ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .instruction {
            font-size: clamp(0.9rem, 3.5vw, 1.2rem);
            color: #fff;
            margin-top: clamp(1rem, 4vw, 1.5rem);
            max-width: 600px;
            line-height: 1.6;
            text-align: center;
            background: rgba(0, 0, 0, 0.2);
            padding: clamp(0.8rem, 3vw, 1rem) clamp(1rem, 4vw, 1.5rem);
            border-radius: 10px;
            border: 1px solid rgba(255, 204, 0, 0.3);
            width: calc(100% - 40px); /* ç•™å‡ºå®‰å…¨è¾¹è· */
        }
        
        /* éŸ³ä¹æ§åˆ¶ - ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼ˆå›ºå®šåœ¨å®‰å…¨åŒºåŸŸï¼‰ */
        .music-control {
            position: fixed;
            top: env(safe-area-inset-top, 20px); /* iOSå®‰å…¨åŒºåŸŸé€‚é… */
            top: max(env(safe-area-inset-top, 20px), 20px); /* å–å®‰å…¨åŒºåŸŸå’Œæœ€å°å€¼çš„è¾ƒå¤§è€… */
            right: env(safe-area-inset-right, 20px);
            right: max(env(safe-area-inset-right, 20px), 20px);
            width: clamp(45px, 12vw, 60px);
            height: clamp(45px, 12vw, 60px);
            background: linear-gradient(145deg, #ff9900, #ffcc00);
            border: 2px solid #fff;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: clamp(1.5rem, 5vw, 1.8rem);
            color: #cc0000;
            transition: all 0.3s;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: scale(0.8);
            transition: opacity 0.5s, transform 0.5s;
            touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸ */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç‚¹å‡»é«˜äº® */
        }
        
        .music-control.show {
            opacity: 1;
            transform: scale(1);
        }
        
        .music-control:active {
            transform: scale(0.95); /* ç§»åŠ¨ç«¯ç‚¹å‡»åé¦ˆ */
        }
        
        /* ç¥ç¦å¼¹çª—æ ·å¼ - ç§»åŠ¨ç«¯æ·±åº¦ä¼˜åŒ– */
        .blessing-popup {
            position: fixed;
            background: linear-gradient(145deg, #fff9e6, #ffe6cc);
            border: 4px solid #ff3333;
            border-radius: 15px;
            padding: clamp(1rem, 3vw, 1.5rem) clamp(1.2rem, 4vw, 2rem);
            width: min(300px, 85vw); /* æœ€å¤§å®½åº¦300pxï¼Œæœ€å°85%è§†å£å®½åº¦ */
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.5),
                inset 0 0 20px rgba(255, 204, 0, 0.2);
            z-index: 1000;
            animation: popIn 0.4s ease-out;
            cursor: move;
            user-select: none;
            backdrop-filter: blur(5px);
            touch-action: none; /* æ‹–åŠ¨æ—¶ç¦ç”¨é»˜è®¤è§¦æ‘¸è¡Œä¸º */
            max-height: 80vh; /* é˜²æ­¢å¼¹çª—è¿‡é«˜ */
            overflow: hidden; /* é˜²æ­¢å†…å®¹æº¢å‡º */
        }
        
        /* ç§»åŠ¨ç«¯æ‹–åŠ¨ä¼˜åŒ– */
        .blessing-popup.dragging {
            transition: none; /* æ‹–åŠ¨æ—¶ç¦ç”¨è¿‡æ¸¡æ•ˆæœ */
            z-index: 1002; /* æé«˜æ‹–åŠ¨æ—¶çš„å±‚çº§ */
        }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(0.8rem, 2.5vw, 1rem);
            padding-bottom: clamp(0.5rem, 1.5vw, 0.6rem);
            border-bottom: 2px solid #ffcc00;
            touch-action: none; /* å¤´éƒ¨åŒºåŸŸæ‹–åŠ¨ä¼˜åŒ– */
        }
        
        .popup-title {
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            color: #990000;
            font-weight: bold;
            display: flex;
            align-items: center;
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
            overflow: hidden; /* é˜²æ­¢æ ‡é¢˜è¿‡é•¿ */
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .popup-title::before {
            content: "âœ¨";
            margin-right: 0.5rem;
            flex-shrink: 0; /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼© */
        }
        
        .close-btn {
            cursor: pointer;
            background: linear-gradient(to bottom, #ff3333, #990000);
            color: #ffcc00;
            border: 2px solid #ffcc00;
            border-radius: 50%;
            width: clamp(28px, 8vw, 32px);
            height: clamp(28px, 8vw, 32px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            transition: all 0.2s;
            flex-shrink: 0; /* é˜²æ­¢æŒ‰é’®è¢«å‹ç¼© */
            touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸ */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç‚¹å‡»é«˜äº® */
        }
        
        .close-btn:active {
            transform: scale(0.9); /* ç§»åŠ¨ç«¯ç‚¹å‡»åé¦ˆ */
        }
        
        .popup-content {
            font-size: clamp(1.1rem, 4vw, 1.3rem);
            color: #cc3300;
            text-align: center;
            font-weight: bold;
            line-height: 1.5;
            padding: clamp(0.6rem, 2vw, 0.8rem);
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px dashed #ff9900;
            word-break: break-word; /* é•¿æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œ */
            overflow-wrap: break-word; /* é˜²æ­¢æ–‡æœ¬æº¢å‡º */
        }
        
        @keyframes popIn {
            0% { transform: scale(0) rotate(-10deg); opacity: 0; }
            70% { transform: scale(1.05) rotate(5deg); }
            100% { transform: scale(1) rotate(0); opacity: 1; }
        }
        
        /* å¼ºåˆ¶è¯„åˆ†å¼¹çª— - ç§»åŠ¨ç«¯æ·±åº¦ä¼˜åŒ– */
        .rating-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9998;
            display: none;
            backdrop-filter: blur(5px);
        }
        
        .rating-overlay.active {
            display: block;
        }
        
        .rating-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(145deg, #fff9e6, #ffe6cc);
            border: 5px solid #ff3333;
            border-radius: 15px;
            padding: clamp(1.5rem, 5vw, 2rem) clamp(1.8rem, 6vw, 2.5rem);
            width: min(350px, 90vw); /* æœ€å¤§å®½åº¦350pxï¼Œæœ€å°90%è§†å£å®½åº¦ */
            max-width: 90%;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.7),
                inset 0 0 20px rgba(255, 204, 0, 0.2);
            z-index: 9999;
            transition: transform 0.4s ease;
            display: none;
            max-height: 85vh; /* é˜²æ­¢å¼¹çª—è¿‡é«˜ */
            overflow-y: auto; /* å…è®¸å†…å®¹æ»šåŠ¨ */
            -webkit-overflow-scrolling: touch; /* ç§»åŠ¨ç«¯å¹³æ»‘æ»šåŠ¨ */
        }
        
        .rating-popup.active {
            transform: translate(-50%, -50%) scale(1);
            display: block;
        }
        
        .rating-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: clamp(1rem, 3vw, 1.2rem);
            padding-bottom: clamp(0.6rem, 2vw, 0.8rem);
            border-bottom: 2px solid #ffcc00;
        }
        
        .rating-title {
            font-size: clamp(1.4rem, 5vw, 1.6rem);
            color: #990000;
            font-weight: bold;
            text-align: center;
            line-height: 1.3;
        }
        
        .rating-prompt {
            text-align: center;
            color: #cc3300;
            margin-bottom: clamp(1.2rem, 4vw, 1.5rem);
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            line-height: 1.5;
            font-weight: bold;
        }
        
        .stars-container {
            display: flex;
            justify-content: center;
            gap: clamp(0.5rem, 2vw, 0.8rem);
            margin: clamp(1.2rem, 4vw, 1.5rem) 0;
            flex-wrap: wrap; /* å°å±å¹•æ¢è¡Œ */
        }
        
        .star {
            font-size: clamp(2rem, 8vw, 2.5rem);
            color: #ffcc00;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸ */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç‚¹å‡»é«˜äº® */
        }
        
        .star:active {
            transform: scale(0.9); /* ç§»åŠ¨ç«¯ç‚¹å‡»åé¦ˆ */
        }
        
        .star.active {
            color: #ff9900;
            transform: scale(1.3);
            text-shadow: 0 0 15px rgba(255, 204, 0, 0.8);
        }
        
        .rating-submit {
            display: block;
            width: 100%;
            padding: clamp(0.8rem, 3vw, 1rem);
            background: linear-gradient(145deg, #ffcc00, #ff9900);
            color: #990000;
            border: none;
            border-radius: 10px;
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: clamp(1rem, 3vw, 1.2rem);
            font-weight: bold;
            letter-spacing: clamp(0.1rem, 1vw, 0.2rem);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-height: 50px; /* ç¡®ä¿è§¦æ‘¸ç›®æ ‡è¶³å¤Ÿå¤§ */
            touch-action: manipulation; /* ä¼˜åŒ–è§¦æ‘¸ */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç‚¹å‡»é«˜äº® */
        }
        
        .rating-submit:active {
            transform: scale(0.98); /* ç§»åŠ¨ç«¯ç‚¹å‡»åé¦ˆ */
        }
        
        .rating-submit:disabled {
            background: linear-gradient(145deg, #cccccc, #999999);
            color: #666666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .rating-submit:disabled:active {
            transform: none; /* ç¦ç”¨çŠ¶æ€ä¸‹æ— ç‚¹å‡»åé¦ˆ */
        }
        
        .rating-feedback {
            text-align: center;
            color: #990000;
            margin-top: clamp(1rem, 3vw, 1.2rem);
            font-size: clamp(1rem, 3.5vw, 1.1rem);
            line-height: 1.5;
            display: none;
            font-weight: bold;
        }
        
        /* è¯„åˆ†æç¤º */
        .rating-hint {
            text-align: center;
            color: #ff3333;
            margin-top: 0.5rem;
            font-size: clamp(0.9rem, 3vw, 1rem);
            font-weight: bold;
            display: none;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        /* ä¸­å›½é£è£…é¥° - ç¯ç¬¼ï¼ˆç§»åŠ¨ç«¯éšè—ï¼‰ */
        .lantern {
            position: fixed;
            width: 60px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, #ff3333 0%, #990000 100%);
            border-radius: 30px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            z-index: 5;
            opacity: 0;
            transition: opacity 1s ease;
            display: none; /* ç§»åŠ¨ç«¯éšè—ä»¥èŠ‚çœèµ„æº */
        }
        
        .lantern.show {
            opacity: 1;
        }
        
        .lantern::before {
            content: "";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 15px;
            background: #ffcc00;
            border-radius: 10px 10px 0 0;
        }
        
        .lantern::after {
            content: "ç¦";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #ffcc00;
            font-weight: bold;
        }
        
        .lantern-left {
            left: 50px;
            top: 100px;
            animation: lanternFloat 4s ease-in-out infinite;
        }
        
        .lantern-right {
            right: 50px;
            top: 100px;
            animation: lanternFloat 4s ease-in-out infinite 2s;
        }
        
        @keyframes lanternFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        /* é¡µè„š - ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .footer {
            position: fixed;
            bottom: max(env(safe-area-inset-bottom, 20px), 20px); /* iOSå®‰å…¨åŒºåŸŸé€‚é… */
            left: 0;
            width: 100%;
            text-align: center;
            font-size: clamp(0.8rem, 3vw, 1rem);
            color: #ffcc00;
            letter-spacing: clamp(0.1rem, 1vw, 0.2rem);
            z-index: 5;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease;
            padding: 0 20px; /* å·¦å³å†…è¾¹è·é˜²æ­¢è´´è¾¹ */
            box-sizing: border-box;
        }
        
        .footer.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* çƒŸèŠ±æ•ˆæœ - å¢å¼ºç‰ˆ */
        .firework {
            position: absolute;
            pointer-events: none;
            z-index: 998;
        }
        
        .firework-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0;
            transform-origin: center;
            box-shadow: 0 0 10px currentColor;
            will-change: transform, opacity; /* ç¡¬ä»¶åŠ é€Ÿ */
        }
        
        /* å¼€åœºå¤§çƒŸèŠ±ç‰¹æ•ˆ - å¢å¼ºç‰ˆ */
        .opening-firework {
            position: fixed;
            pointer-events: none;
            z-index: 9998;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ffcc00, #ff9900, #ff3333);
            opacity: 0;
            box-shadow: 0 0 15px #ff9900;
            will-change: transform, opacity;
        }
        
        /* çƒŸèŠ±å°¾è¿¹ */
        .firework-trail {
            position: fixed;
            pointer-events: none;
            z-index: 9997;
            width: 2px;
            height: 2px;
            border-radius: 50%;
            opacity: 0;
            background: #ffcc00;
            will-change: transform, opacity;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: fadeInUp 0.8s ease forwards;
            opacity: 0;
        }
        
        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <!-- å¼€åœºè¦†ç›–å±‚å’ŒçƒŸèŠ±æ•ˆæœ -->
    <div class="opening-overlay" id="openingOverlay">
        <div class="opening-content">
            <div class="horse-image-container">
                <!-- è¿™é‡Œå¯ä»¥æ›¿æ¢ä¸ºæ‚¨å–œæ¬¢çš„å›¾ç‰‡ -->
                <img src="123456789.png" 
                     alt="éªé©¬å›¾" class="horse-image">
            </div>
            <div class="opening-text">è´°é›¶è´°é™† é©¬å¹´å¤§å‰</div>
        </div>
    </div>
    
    <!-- å–œåº†èƒŒæ™¯ -->
    <div class="background"></div>
    <div class="cloud-pattern"></div>
    
    <!-- ç¯ç¬¼è£…é¥°ï¼ˆç§»åŠ¨ç«¯éšè—ï¼‰ -->
    <div class="lantern lantern-left"></div>
    <div class="lantern lantern-right"></div>
    
    <!-- éŸ³ä¹æ§åˆ¶ -->
    <div class="music-control" id="musicControl">
        <span id="musicIcon">â™ª</span>
    </div>
    
    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-container" id="mainContainer">
        <div class="banner animate-in">
            <div class="banner-text">è´°é›¶è´°é™† Â· é©¬å¹´å¤§å‰</div>
        </div>
        
        <div class="horse-section animate-in delay-1">
            <div class="horse-symbol">ğŸ</div>
            <div class="year-text">2026</div>
        </div>
        
        <button class="main-btn animate-in delay-2" id="startBtn">å¼€å¯é©¬å¹´é¸¿è¿</button>
        
        <div class="instruction animate-in delay-3">
            ç‚¹å‡»æŒ‰é’®å¼€å¯ç¥ç¦ï¼Œå…³é—­å¼¹å‡ºçš„ç¥ç¦å¡ç‰‡
        </div>
    </div>
    
    <!-- é¡µè„š -->
    <div class="footer" id="footer">
        2026 Â· é©¬å¹´å¤§å‰ Â· å–œåº†ä¸­å›½é£ 
    </div>
    
    <!-- å¼ºåˆ¶è¯„åˆ†å¼¹çª— - æ— å…³é—­æŒ‰é’® -->
    <div class="rating-overlay" id="ratingOverlay"></div>
    <div class="rating-popup" id="ratingPopup">
        <div class="rating-header">
            <div class="rating-title">è¯·ç»™ä¸ªè¯„åˆ†</div>
        </div>
        <div class="rating-prompt">
            æ”¶åˆ°æˆ‘çš„ç¥ç¦ä¸å¾—æ¥ä¸ªäº”æ˜Ÿï¼
        </div>
        <div class="stars-container">
            <div class="star" data-rating="1">â˜…</div>
            <div class="star" data-rating="2">â˜…</div>
            <div class="star" data-rating="3">â˜…</div>
            <div class="star" data-rating="4">â˜…</div>
            <div class="star" data-rating="5">â˜…</div>
        </div>
        <div class="rating-hint" id="ratingHint">è¯·å…ˆé€‰æ‹©è¯„åˆ†æ˜Ÿçº§ï¼</div>
        <button class="rating-submit" id="ratingSubmit" disabled>æäº¤è¯„åˆ†</button>
        <div class="rating-feedback" id="ratingFeedback">
             æœ‹å‹ä»¬ï¼Œæ–°å¹´å¿«ä¹ï¼
            <br>â€”â€” æ‰æµ…çš„ä¿Šç¿
        </div>
    </div>
    
    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="bgMusic" loop preload="auto" playsinline>
        <source src="M500001936qu1DqoLD.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ï¼Œè¯·æ›´æ¢æµè§ˆå™¨å°è¯•ã€‚
    </audio>

    <script>
        // ç¥ç¦è¯­æ•°æ®
        const blessings = [
            "ğŸ é©¬åˆ°æˆåŠŸï¼ä¸€é©¬å½“å…ˆï¼",
            "âœ¨ 2026 é©¬å¹´å¤§å‰ï¼Œä¸‡äº‹å¦‚æ„ï¼",
            "ğŸ’° è´¢æºå¹¿è¿›ï¼Œé‡‘ç‰æ»¡å ‚ï¼",
            "ğŸ§§ é˜–å®¶æ¬¢ä¹ï¼Œç¦å¯¿å®‰åº·ï¼",
            "ğŸ‰ 2026 å¹³å®‰å–œä¹ï¼Œå²å²å¹³å®‰ï¼",
            "ğŸŒŸ å®å›¾å¤§å±•ï¼Œæ­¥æ­¥é«˜å‡ï¼",
            "ğŸ èº«ä½“å¥åº·ï¼Œé•¿å‘½ç™¾å²ï¼",
            "ğŸ€ å¥½è¿è¿è¿ï¼Œç¦æ°”æ»¡æ»¡ï¼",
            "ğŸ’ª é¾™é©¬ç²¾ç¥ï¼Œé©°éª‹åƒé‡Œï¼",
            "ğŸ”¥ äº‹ä¸šçº¢ç«ï¼Œè’¸è’¸æ—¥ä¸Šï¼",
            "ğŸŒ¸ èŠ±å¼€å¯Œè´µï¼Œç«¹æŠ¥å¹³å®‰ï¼",
            "ğŸ‹ å¹´å¹´æœ‰ä½™ï¼Œå²å²ä»Šæœï¼",
            "ğŸ® ç¯ç¬¼é«˜æŒ‚ï¼Œé¸¿è¿å½“å¤´ï¼",
            "ğŸ å®¶åº­å’Œç¦ï¼Œå¹¸ç¦ç¾æ»¡ï¼",
            "ğŸ’® äº”ç¦ä¸´é—¨ï¼Œå…­å…­å¤§é¡ºï¼",
            "ğŸ¥® å›¢å›¢åœ†åœ†ï¼Œç”œç”œèœœèœœï¼",
            "ğŸ å¿ƒæƒ³äº‹æˆï¼Œç¾æ¢¦æˆçœŸï¼",
            "ğŸ é£è°ƒé›¨é¡ºï¼Œå›½æ³°æ°‘å®‰ï¼",
            "ğŸ é±¼è·ƒé¾™é—¨ï¼Œå‰ç¨‹ä¼¼é”¦ï¼",
            "ğŸ§¨ çˆ†ç«¹å£°ä¸­ä¸€å²é™¤ï¼Œæ˜¥é£é€æš–å…¥å± è‹ï¼"
        ];
        
        // åˆå§‹åŒ–å˜é‡
        let isMusicPlaying = false;
        let closeCount = 0;
        let selectedRating = 0;
        let ratingTriggered = false;
        
        // DOMå…ƒç´ 
        const openingOverlay = document.getElementById('openingOverlay');
        const mainContainer = document.getElementById('mainContainer');
        const musicControl = document.getElementById('musicControl');
        const musicIcon = document.getElementById('musicIcon');
        const bgMusic = document.getElementById('bgMusic');
        const startBtn = document.getElementById('startBtn');
        const ratingOverlay = document.getElementById('ratingOverlay');
        const ratingPopup = document.getElementById('ratingPopup');
        const ratingSubmit = document.getElementById('ratingSubmit');
        const stars = document.querySelectorAll('.star');
        const ratingFeedback = document.getElementById('ratingFeedback');
        const ratingHint = document.getElementById('ratingHint');
        const footer = document.getElementById('footer');
        
        // æ£€æµ‹è®¾å¤‡ç±»å‹
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®éŸ³é¢‘å±æ€§
            bgMusic.volume = 0.6;
            bgMusic.loop = true;
            
            // iOSç‰¹æ®Šå¤„ç†
            if (isIOS) {
                // iOSéœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½æ’­æ”¾éŸ³é¢‘
                document.body.addEventListener('touchstart', initAudioOnce, { once: true });
                document.body.addEventListener('touchend', initAudioOnce, { once: true });
            } else {
                // å…¶ä»–è®¾å¤‡ç›´æ¥å°è¯•æ’­æ”¾
                initAudio();
            }
            
            // å¼€å§‹å¼€åœºåŠ¨ç”»
            createOpeningFireworks();
            
            // éŸ³ä¹æ§åˆ¶äº‹ä»¶
            musicControl.addEventListener('click', toggleMusic);
            musicControl.addEventListener('touchend', function(e) {
                e.preventDefault();
                toggleMusic();
            });
            
            // ä¸»æŒ‰é’®äº‹ä»¶
            startBtn.addEventListener('click', startBlessing);
            startBtn.addEventListener('touchend', function(e) {
                e.preventDefault();
                startBlessing();
            });
            
            // æäº¤è¯„åˆ†äº‹ä»¶
            ratingSubmit.addEventListener('click', submitRating);
            ratingSubmit.addEventListener('touchend', function(e) {
                e.preventDefault();
                submitRating();
            });
            
            // æ˜Ÿçº§è¯„åˆ†äº‹ä»¶
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.getAttribute('data-rating'));
                    updateStars();
                    ratingSubmit.disabled = false;
                    ratingHint.style.display = 'none';
                });
                
                star.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    selectedRating = parseInt(this.getAttribute('data-rating'));
                    updateStars();
                    ratingSubmit.disabled = false;
                    ratingHint.style.display = 'none';
                });
                
                star.addEventListener('touchstart', function(e) {
                    // é˜²æ­¢è§¦æ‘¸æ—¶è§¦å‘å…¶ä»–äº‹ä»¶
                    e.stopPropagation();
                });
            });
            
            // æ·»åŠ åˆå§‹åŠ¨ç”»æ•ˆæœ
            setTimeout(() => {
                document.querySelectorAll('.animate-in').forEach(el => {
                    el.style.opacity = '1';
                });
            }, 4500);
            
            // é˜»æ­¢ESCé”®å…³é—­è¯„åˆ†å¼¹çª—
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && ratingPopup.classList.contains('active')) {
                    e.preventDefault();
                    showRatingHint();
                }
            });
            
            // é˜»æ­¢ç‚¹å‡»é®ç½©å±‚å…³é—­è¯„åˆ†å¼¹çª—
            ratingOverlay.addEventListener('click', function(e) {
                if (ratingPopup.classList.contains('active')) {
                    e.stopPropagation();
                    showRatingHint();
                }
            });
            
            // ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶ä¼˜åŒ–
            ratingOverlay.addEventListener('touchstart', function(e) {
                if (ratingPopup.classList.contains('active')) {
                    e.stopPropagation();
                }
            });
            
            // é˜²æ­¢ç§»åŠ¨ç«¯åŒå‡»ç¼©æ”¾
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            
            // é˜²æ­¢ç§»åŠ¨ç«¯æ»šåŠ¨
            document.addEventListener('touchmove', function(e) {
                if (ratingPopup.classList.contains('active')) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // ç›‘å¬è§†å£å˜åŒ–ï¼ˆæ—‹è½¬ï¼‰
            window.addEventListener('resize', handleResize);
            window.addEventListener('orientationchange', handleResize);
            
            // åˆå§‹è°ƒæ•´
            handleResize();
        });
        
        // åˆå§‹åŒ–éŸ³é¢‘ï¼ˆiOSéœ€è¦ç”¨æˆ·äº¤äº’ï¼‰
        function initAudioOnce() {
            initAudio();
        }
        
        function initAudio() {
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                musicIcon.textContent = 'â™«';
                musicControl.style.background = 'linear-gradient(145deg, #ffcc00, #ff9900)';
            }).catch(e => {
                console.log("éŸ³é¢‘æ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’");
                // æ˜¾ç¤ºæç¤º
                if (isMobile) {
                    const hint = document.createElement('div');
                    hint.innerHTML = 'ğŸ‘† ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®æ¿€æ´»éŸ³é¢‘';
                    hint.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(0,0,0,0.8);
                        color: #ffcc00;
                        padding: 1rem 1.5rem;
                        border-radius: 10px;
                        font-size: 1rem;
                        z-index: 1003;
                        text-align: center;
                        animation: fadeInUp 0.5s ease;
                    `;
                    document.body.appendChild(hint);
                    
                    setTimeout(() => {
                        hint.remove();
                    }, 3000);
                }
            });
        }
        
        // å¤„ç†è§†å£å˜åŒ–
        function handleResize() {
            // è°ƒæ•´å¼¹çª—ä½ç½®ï¼Œé˜²æ­¢è¶…å‡ºå±å¹•
            document.querySelectorAll('.blessing-popup').forEach(popup => {
                const rect = popup.getBoundingClientRect();
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;
                
                // å¦‚æœå¼¹çª—è¶…å‡ºå±å¹•ï¼Œè°ƒæ•´ä½ç½®
                if (rect.right > windowWidth) {
                    popup.style.left = `${windowWidth - rect.width - 10}px`;
                }
                if (rect.bottom > windowHeight) {
                    popup.style.top = `${windowHeight - rect.height - 10}px`;
                }
                if (rect.left < 0) {
                    popup.style.left = '10px';
                }
                if (rect.top < 0) {
                    popup.style.top = '10px';
                }
            });
        }
        
        // æ˜¾ç¤ºè¯„åˆ†æç¤º
        function showRatingHint() {
            ratingHint.textContent = 'è¯·å…ˆå®Œæˆè¯„åˆ†æ‰èƒ½ç»§ç»­ï¼';
            ratingHint.style.display = 'block';
            
            // æ·»åŠ éœ‡åŠ¨æ•ˆæœ
            ratingPopup.style.animation = 'none';
            setTimeout(() => {
                ratingPopup.style.animation = '';
            }, 10);
            
            // çŸ­æš‚éœ‡åŠ¨å¼¹çª—
            const originalTransform = ratingPopup.style.transform;
            ratingPopup.style.transform = originalTransform + ' translateY(-5px)';
            setTimeout(() => {
                ratingPopup.style.transform = originalTransform + ' translateY(5px)';
            }, 50);
            setTimeout(() => {
                ratingPopup.style.transform = originalTransform;
            }, 100);
        }
        
        // å¼€åœºçƒŸèŠ±ç‰¹æ•ˆï¼ˆå¢å¼ºç‰ˆï¼‰
        function createOpeningFireworks() {
            // çƒŸèŠ±æ•°é‡ä¸å—ç§»åŠ¨ç«¯é™åˆ¶
            const fireworkCount = 10; // å¢åŠ çƒŸèŠ±æ•°é‡
            
            for (let i = 0; i < fireworkCount; i++) {
                setTimeout(() => {
                    createBigFirework();
                }, 600 + i * 500);
            }
            
            // 4ç§’åæ·¡å‡ºå¼€åœºè¦†ç›–å±‚å¹¶æ˜¾ç¤ºä¸»å†…å®¹
            setTimeout(() => {
                openingOverlay.classList.add('fade-out');
                
                // æ˜¾ç¤ºä¸»å†…å®¹
                setTimeout(() => {
                    mainContainer.classList.add('show');
                    musicControl.classList.add('show');
                    footer.classList.add('show');
                }, 500);
            }, 4000);
        }
        
        // åˆ›å»ºå¤§å‹çƒŸèŠ±ï¼ˆå¢å¼ºç‰ˆï¼‰
        function createBigFirework() {
            const colorSets = [
                ['#ffcc00', '#ff9900', '#ff3333'],
                ['#ffffff', '#ffcc00', '#ff9900'],
                ['#ffcc00', '#ffffff', '#ff3333'],
                ['#ff9900', '#ffcc00', '#ffffff']
            ];
            
            const colorSet = colorSets[Math.floor(Math.random() * colorSets.length)];
            
            // çƒŸèŠ±å‘å°„ç‚¹
            const launchX = 100 + Math.random() * (window.innerWidth - 200);
            const launchY = window.innerHeight;
            
            // åœ¨ç›®æ ‡ä½ç½®çˆ†ç‚¸
            const targetY = 80 + Math.random() * (window.innerHeight / 2);
            const targetX = launchX + (Math.random() - 0.5) * 150;
            
            // å¢å¼ºç‰ˆç²’å­æ•°é‡
            const particleCount = 100; // å¢åŠ ç²’å­æ•°é‡
            createExplosion(targetX, targetY, colorSet, particleCount);
        }
        
        // åˆ›å»ºçˆ†ç‚¸æ•ˆæœï¼ˆå¢å¼ºç‰ˆï¼‰
        function createExplosion(x, y, colorSet, particleCount = 100) {
            const particles = particleCount; // ä¸å†å‡å°‘ç²’å­æ•°é‡
            
            for (let i = 0; i < particles; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'firework-particle';
                    particle.style.left = `${x}px`;
                    particle.style.top = `${y}px`;
                    const color = colorSet[Math.floor(Math.random() * colorSet.length)];
                    particle.style.backgroundColor = color;
                    particle.style.color = color;
                    particle.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
                    
                    document.body.appendChild(particle);
                    
                    const angle = (i / particles) * Math.PI * 2;
                    const distance = 80 + Math.random() * 200; // å¢åŠ çˆ†ç‚¸èŒƒå›´
                    const targetX = x + Math.cos(angle) * distance;
                    const targetY = y + Math.sin(angle) * distance;
                    const size = 4 + Math.random() * 10; // å¢åŠ ç²’å­å¤§å°
                    const duration = 800 + Math.random() * 600; // å¢åŠ æŒç»­æ—¶é—´
                    
                    // ç²’å­åŠ¨ç”»
                    particle.animate([
                        { 
                            opacity: 0, 
                            transform: `scale(0) translate(0, 0)`, 
                            width: `${size}px`, 
                            height: `${size}px` 
                        },
                        { 
                            opacity: 1, 
                            transform: `scale(1.5) translate(${Math.cos(angle) * distance/2}px, ${Math.sin(angle) * distance/2}px)`, 
                            width: `${size}px`, 
                            height: `${size}px` 
                        },
                        { 
                            opacity: 0.8, 
                            transform: `scale(1) translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`, 
                            width: `${size}px`, 
                            height: `${size}px` 
                        },
                        { 
                            opacity: 0, 
                            transform: `scale(0.5) translate(${Math.cos(angle) * distance * 1.1}px, ${Math.sin(angle) * distance * 1.1}px)`, 
                            width: `${size}px`, 
                            height: `${size}px` 
                        }
                    ], {
                        duration: duration,
                        easing: 'cubic-bezier(0.1, 0.8, 0.2, 1)'
                    });
                    
                    // ç§»é™¤å…ƒç´ 
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, duration);
                }, i * 5); // å‡å°‘å»¶è¿Ÿï¼Œä½¿çƒŸèŠ±æ›´å¯†é›†
            }
        }
        
        // åˆ›å»ºç¥ç¦å¼¹çª—
        function createPopup(text) {
            const popup = document.createElement('div');
            popup.className = 'blessing-popup';
            
            // è®¡ç®—å¼¹çª—å°ºå¯¸
            const popupWidth = isMobile ? Math.min(300, window.innerWidth * 0.85) : 300;
            const popupHeight = 150; // é¢„ä¼°é«˜åº¦
            
            // éšæœºä½ç½®ï¼Œç¡®ä¿åœ¨å¯è§†åŒºåŸŸå†…
            const maxX = window.innerWidth - popupWidth - 20;
            const maxY = window.innerHeight - popupHeight - 20;
            const x = Math.max(20, Math.min(maxX, Math.random() * maxX));
            const y = Math.max(20, Math.min(maxY, Math.random() * maxY));
            
            popup.style.width = `${popupWidth}px`;
            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;
            
            popup.innerHTML = `
                <div class="popup-header">
                    <div class="popup-title">é©¬å¹´ç¥ç¦</div>
                    <div class="close-btn">Ã—</div>
                </div>
                <div class="popup-content">${text}</div>
            `;
            
            document.body.appendChild(popup);
            
            // æ·»åŠ å…³é—­äº‹ä»¶
            const closeBtn = popup.querySelector('.close-btn');
            closeBtn.addEventListener('click', function() {
                closePopup(popup);
            });
            
            // ç§»åŠ¨ç«¯è§¦æ‘¸å…³é—­
            closeBtn.addEventListener('touchend', function(e) {
                e.preventDefault();
                closePopup(popup);
            });
            
            // æ·»åŠ æ‹–åŠ¨åŠŸèƒ½ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
            makeDraggable(popup);
            
            // ä¸ºæ¯ä¸ªå¼¹çª—åˆ›å»ºçƒŸèŠ±æ•ˆæœ
            createFirework(x + (popupWidth / 2), y + (popupHeight / 2));
            
            return popup;
        }
        
        // åˆ›å»ºçƒŸèŠ±æ•ˆæœ
        function createFirework(x, y) {
            const colors = ['#ffcc00', '#ff9900', '#ff3333', '#ffffff', '#ffcc00'];
            
            // ä¸ºæ¯ä¸ªå¼¹çª—åˆ›å»ºå¤šä¸ªçƒŸèŠ±
            for (let j = 0; j < 2; j++) {
                setTimeout(() => {
                    const offsetX = (Math.random() - 0.5) * 100;
                    const offsetY = (Math.random() - 0.5) * 100;
                    
                    for (let i = 0; i < 12; i++) {
                        setTimeout(() => {
                            const particle = document.createElement('div');
                            particle.className = 'firework-particle';
                            particle.style.left = `${x + offsetX}px`;
                            particle.style.top = `${y + offsetY}px`;
                            const color = colors[Math.floor(Math.random() * colors.length)];
                            particle.style.backgroundColor = color;
                            particle.style.color = color;
                            particle.style.boxShadow = `0 0 8px ${color}`;
                            
                            document.body.appendChild(particle);
                            
                            const angle = (i / 12) * Math.PI * 2;
                            const distance = 30 + Math.random() * 60;
                            
                            // ç²’å­åŠ¨ç”»
                            particle.animate([
                                { 
                                    opacity: 0, 
                                    transform: 'scale(0) translate(0, 0)' 
                                },
                                { 
                                    opacity: 1, 
                                    transform: `scale(1.2) translate(${Math.cos(angle) * distance/2}px, ${Math.sin(angle) * distance/2}px)` 
                                },
                                { 
                                    opacity: 0, 
                                    transform: `scale(0.5) translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)` 
                                }
                            ], {
                                duration: 600,
                                easing: 'ease-out'
                            });
                            
                            // ç§»é™¤å…ƒç´ 
                            setTimeout(() => {
                                if (particle.parentNode) {
                                    particle.parentNode.removeChild(particle);
                                }
                            }, 600);
                        }, i * 40);
                    }
                }, j * 200);
            }
        }
        
        // å…³é—­å¼¹çª—
        function closePopup(popup) {
            // æ·¡å‡ºæ•ˆæœ
            popup.style.transition = 'opacity 0.3s, transform 0.3s';
            popup.style.opacity = '0';
            popup.style.transform = 'scale(0.9)';
            
            // å¢åŠ å…³é—­è®¡æ•°
            closeCount++;
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦è§¦å‘è¯„åˆ†å¼¹çª—
            if (closeCount >= 3 && !ratingTriggered) {
                setTimeout(() => {
                    triggerRatingPopup();
                }, 500);
            }
            
            // åˆ›å»ºæ–°å¼¹çª— - å…³é—­ä¸€ä¸ªå¾—åˆ°ä¸¤ä¸ª
            setTimeout(() => {
                const randomBlessing = blessings[Math.floor(Math.random() * blessings.length)];
                createPopup(randomBlessing);
            }, 300);
            
            setTimeout(() => {
                const randomBlessing = blessings[Math.floor(Math.random() * blessings.length)];
                createPopup(randomBlessing);
            }, 600);
            
            // ç§»é™¤å¼¹çª—
            setTimeout(() => {
                if (popup.parentNode) {
                    popup.parentNode.removeChild(popup);
                }
            }, 300);
        }
        
        // ä½¿å…ƒç´ å¯æ‹–åŠ¨ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            let isDragging = false;
            
            const header = element.querySelector('.popup-header');
            
            // æ¡Œé¢ç«¯é¼ æ ‡äº‹ä»¶
            header.onmousedown = dragMouseDown;
            
            // ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶
            header.addEventListener('touchstart', touchStart, { passive: false });
            header.addEventListener('touchmove', touchMove, { passive: false });
            header.addEventListener('touchend', touchEnd);
            
            function dragMouseDown(e) {
                e.preventDefault();
                startDrag(e.clientX, e.clientY);
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function touchStart(e) {
                if (e.touches.length === 1) {
                    const touch = e.touches[0];
                    startDrag(touch.clientX, touch.clientY);
                    element.classList.add('dragging');
                    e.preventDefault();
                }
            }
            
            function touchMove(e) {
                if (e.touches.length === 1 && isDragging) {
                    const touch = e.touches[0];
                    elementDragTouch(touch.clientX, touch.clientY);
                    e.preventDefault();
                }
            }
            
            function touchEnd() {
                closeDragElement();
                element.classList.remove('dragging');
            }
            
            function startDrag(clientX, clientY) {
                isDragging = true;
                pos3 = clientX;
                pos4 = clientY;
                element.style.zIndex = '1001';
            }
            
            function elementDrag(e) {
                if (!isDragging) return;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                updatePosition();
            }
            
            function elementDragTouch(clientX, clientY) {
                if (!isDragging) return;
                pos1 = pos3 - clientX;
                pos2 = pos4 - clientY;
                pos3 = clientX;
                pos4 = clientY;
                updatePosition();
            }
            
            function updatePosition() {
                const newTop = element.offsetTop - pos2;
                const newLeft = element.offsetLeft - pos1;
                
                // è¾¹ç•Œæ£€æŸ¥ï¼Œé˜²æ­¢æ‹–å‡ºå±å¹•
                const maxTop = window.innerHeight - element.offsetHeight - 10;
                const maxLeft = window.innerWidth - element.offsetWidth - 10;
                
                element.style.top = Math.max(10, Math.min(maxTop, newTop)) + "px";
                element.style.left = Math.max(10, Math.min(maxLeft, newLeft)) + "px";
            }
            
            function closeDragElement() {
                isDragging = false;
                document.onmouseup = null;
                document.onmousemove = null;
                
                // æ¢å¤å¼¹çª—çš„z-index
                setTimeout(() => {
                    element.style.zIndex = '1000';
                }, 100);
            }
        }
        
        // å¼€å§‹ç¥ç¦ä»ªå¼
        function startBlessing() {
            // ç¡®ä¿éŸ³ä¹æ’­æ”¾
            if (!isMusicPlaying) {
                toggleMusic();
            }
            
            // éšè—ä¸»æŒ‰é’®
            startBtn.style.opacity = '0';
            startBtn.style.pointerEvents = 'none';
            
            // åˆ›å»ºå¤šä¸ªç¥ç¦å¼¹çª—
            const popupCount = 8; // å¢åŠ å¼¹çª—æ•°é‡
            for (let i = 0; i < popupCount; i++) {
                setTimeout(() => {
                    const randomBlessing = blessings[Math.floor(Math.random() * blessings.length)];
                    createPopup(randomBlessing);
                }, i * 300);
            }
            
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            setTimeout(() => {
                const hint = document.createElement('div');
                hint.textContent = 'ç‚¹å‡»å…³é—­ä¸€ä¸ªç¥ç¦ï¼Œä¼šå¾—åˆ°ä¸¤ä¸ªæ–°çš„ç¥ç¦ï¼';
                hint.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(145deg, #ffcc00, #ff9900);
                    color: #cc0000;
                    padding: ${isMobile ? '1rem 1.5rem' : '1.5rem 2rem'};
                    border-radius: 10px;
                    font-size: ${isMobile ? '1.1rem' : '1.3rem'};
                    font-weight: bold;
                    border: 3px solid #ff3333;
                    z-index: 1002;
                    text-align: center;
                    max-width: 80%;
                    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
                    animation: popIn 0.5s ease;
                    letter-spacing: 0.1rem;
                `;
                document.body.appendChild(hint);
                
                setTimeout(() => {
                    hint.style.opacity = '0';
                    hint.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        if (hint.parentNode) {
                            hint.parentNode.removeChild(hint);
                        }
                    }, 500);
                }, 3000);
            }, 1500);
        }
        
        // åˆ‡æ¢éŸ³ä¹æ’­æ”¾çŠ¶æ€
        function toggleMusic() {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicIcon.textContent = 'â™ª';
                musicControl.style.background = 'linear-gradient(145deg, #ff9900, #ffcc00)';
            } else {
                bgMusic.play().then(() => {
                    musicIcon.textContent = 'â™«';
                    musicControl.style.background = 'linear-gradient(145deg, #ffcc00, #ff9900)';
                }).catch(e => {
                    // ç§»åŠ¨ç«¯å‹å¥½æç¤º
                    if (isMobile) {
                        const hint = document.createElement('div');
                        hint.textContent = 'è¯·å…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®æ¿€æ´»éŸ³é¢‘';
                        hint.style.cssText = `
                            position: fixed;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: rgba(0,0,0,0.8);
                            color: #ffcc00;
                            padding: 1rem 1.5rem;
                            border-radius: 10px;
                            font-size: 1rem;
                            z-index: 1003;
                            text-align: center;
                            animation: fadeInUp 0.5s ease;
                        `;
                        document.body.appendChild(hint);
                        
                        setTimeout(() => {
                            hint.remove();
                        }, 2000);
                    }
                });
            }
            isMusicPlaying = !isMusicPlaying;
        }
        
        // è§¦å‘è¯„åˆ†å¼¹çª—
        function triggerRatingPopup() {
            if (ratingTriggered) return;
            
            ratingTriggered = true;
            ratingOverlay.classList.add('active');
            ratingPopup.classList.add('active');
            
            // é‡ç½®è¯„åˆ†çŠ¶æ€
            selectedRating = 0;
            updateStars();
            ratingFeedback.style.display = 'none';
            ratingHint.style.display = 'none';
            ratingSubmit.disabled = true;
            
            // ç¦ç”¨æ‰€æœ‰å…¶ä»–äº¤äº’
            document.querySelectorAll('.blessing-popup').forEach(popup => {
                popup.style.pointerEvents = 'none';
                popup.style.opacity = '0.5';
            });
            
            // ç§»åŠ¨ç«¯é”å®šæ»šåŠ¨
            if (isMobile) {
                document.body.style.overflow = 'hidden';
            }
        }
        
        // é«˜äº®æ˜Ÿæ˜Ÿ
        function highlightStars(rating) {
            stars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }
        
        // æ›´æ–°æ˜Ÿæ˜Ÿæ˜¾ç¤º
        function updateStars() {
            stars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= selectedRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }
        
        // æäº¤è¯„åˆ†
        function submitRating() {
            if (selectedRating === 0) {
                ratingHint.textContent = 'è¯·å…ˆé€‰æ‹©è¯„åˆ†æ˜Ÿçº§ï¼';
                ratingHint.style.display = 'block';
                return;
            }
            
            // æ˜¾ç¤ºæ„Ÿè°¢ä¿¡æ¯
            ratingFeedback.style.display = 'block';
            document.querySelector('.rating-prompt').style.display = 'none';
            document.querySelector('.stars-container').style.display = 'none';
            ratingSubmit.style.display = 'none';
            ratingHint.style.display = 'none';
            
            // 3ç§’åå…³é—­å¼¹çª—
            setTimeout(() => {
                // å…³é—­è¯„åˆ†å¼¹çª—
                ratingOverlay.classList.remove('active');
                ratingPopup.classList.remove('active');
                
                // é‡æ–°å¯ç”¨å…¶ä»–å¼¹çª—çš„äº¤äº’
                document.querySelectorAll('.blessing-popup').forEach(popup => {
                    popup.style.pointerEvents = 'auto';
                    popup.style.opacity = '1';
                });
                
                // ç§»åŠ¨ç«¯æ¢å¤æ»šåŠ¨
                if (isMobile) {
                    document.body.style.overflow = '';
                }
                
                // åˆ›å»ºæœ€ç»ˆç¥ç¦
                setTimeout(() => {
                    const finalBlessing = createPopup('ğŸŠæ„¿2026å¹´é©¬åˆ°æˆåŠŸï¼Œå¿ƒæƒ³äº‹æˆï¼ ğŸŠ');
                    finalBlessing.style.left = '50%';
                    finalBlessing.style.top = '50%';
                    finalBlessing.style.transform = 'translate(-50%, -50%)';
                    finalBlessing.style.zIndex = '1002';
                }, 500);
            }, 3000);
        }
    </script>
</body>
</html>